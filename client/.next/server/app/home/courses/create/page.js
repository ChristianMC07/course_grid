(()=>{var e={};e.id=729,e.ids=[729],e.modules={38013:e=>{"use strict";e.exports=require("mongodb")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},89261:e=>{"use strict";e.exports=require("postcss")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},57310:e=>{"use strict";e.exports=require("url")},71267:e=>{"use strict";e.exports=require("worker_threads")},18589:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>l});var t=s(50482),o=s(69108),a=s(62563),i=s.n(a),n=s(68300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(r,c);let l=["",{children:["home",{children:["courses",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,15635)),"/usr/app/client/src/app/home/courses/create/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5677)),"/usr/app/client/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,92793)),"/usr/app/client/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/usr/app/client/src/app/home/courses/create/page.tsx"],d="/home/courses/create/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/home/courses/create/page",pathname:"/home/courses/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},99874:(e,r,s)=>{let t={cc1c9e03f7c6430e1c55e9affadfbc638aa5e145:()=>Promise.resolve().then(s.bind(s,13827)).then(e=>e.createCourse)};async function o(e,...r){return(await t[e]()).apply(null,r)}e.exports={cc1c9e03f7c6430e1c55e9affadfbc638aa5e145:o.bind(null,"cc1c9e03f7c6430e1c55e9affadfbc638aa5e145")}},97999:(e,r,s)=>{Promise.resolve().then(s.bind(s,1024)),Promise.resolve().then(s.bind(s,65102)),Promise.resolve().then(s.bind(s,22315)),Promise.resolve().then(s.bind(s,34910)),Promise.resolve().then(s.bind(s,5511)),Promise.resolve().then(s.bind(s,51864))},40655:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},93283:(e,r,s)=>{Promise.resolve().then(s.bind(s,79006))},35303:()=>{},5511:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(95344),o=s(30290),a=s(56506);function i(){let{user:e,isLoaded:r}=(0,o.aF)();return t.jsx("header",{children:(0,t.jsxs)("nav",{className:"flex items-center h-[15vh] justify-between p-6 lg:px-8 border border-t-0 border-l-0 border-r-0 border-b-gray-600","aria-label":"Global",children:[t.jsx("div",{className:"flex lg:flex-1",children:null!=e?t.jsx("a",{href:"/home",className:"-m-1.5 p-1.5",children:"Home"}):t.jsx("a",{href:"/",className:"-m-1.5 p-1.5",children:"Logo"})}),null==e&&(0,t.jsxs)("div",{className:"flex gap-x-4",children:[t.jsx(a.default,{href:"/sign-in",children:"Sign In"}),t.jsx(a.default,{href:"/sign-up",children:"Register"})]}),r&&e&&(0,t.jsxs)("div",{className:"flex gap-x-10",children:[t.jsx(a.default,{className:"text-blue-900 font-bold hover:text-blue-400 ",href:"/home/courses",children:"Courses"}),t.jsx(o.l8,{afterSignOutUrl:"/"})]})]})})}s(3729)},51864:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});var t=s(95344),o=s(3729),a=s.n(o);class i extends a().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){console.log({error:e,errorInfo:r})}render(){return this.state.hasError?(0,t.jsxs)("div",{children:[t.jsx("h2",{children:"Oops, there is an error!"}),t.jsx("button",{type:"button",onClick:()=>this.setState({hasError:!1}),children:"Try again?"})]}):this.props.children}}let n=i},79006:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});var t=s(95344),o=s(81202),a=s(56506);s(13664);var i=(0,s(28371).$)("cc1c9e03f7c6430e1c55e9affadfbc638aa5e145");function n(){let[e,r]=(0,o.useFormState)(i,new FormData);return t.jsx("div",{className:"min-h-[85vh] bg-gray-100 p-8",children:t.jsx("div",{className:"max-w-lg mx-auto bg-white p-6 rounded shadow",children:(0,t.jsxs)("form",{className:"space-y-4",action:r,noValidate:!0,encType:"multipart/form-data",children:[t.jsx("h1",{className:"text-xl font-bold",children:"Create new course:"}),t.jsx("label",{htmlFor:"courseID",className:"block text-gray-700 text-sm font-bold mb-2",children:"Course code"}),t.jsx("input",{type:"text",id:"courseID",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,name:"courseID"}),e?.courseIDError?(0,t.jsxs)("span",{className:"text-red-500",children:[e.courseIDError," "]}):"",t.jsx("label",{htmlFor:"courseName",className:"block text-gray-700 text-sm font-bold mb-2",children:"Course name"}),t.jsx("input",{type:"text",id:"courseName",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,name:"courseName"}),e?.courseNameError?(0,t.jsxs)("span",{className:"text-red-500",children:[e.courseNameError," "]}):"",t.jsx("label",{htmlFor:"courseDescription",className:"block text-gray-700 text-sm font-bold mb-2",children:"Course description"}),t.jsx("textarea",{id:"courseDescription",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0,name:"courseDescription"}),e?.courseDescriptionError?(0,t.jsxs)("span",{className:"text-red-500",children:[e.courseDescriptionError," "]}):"",t.jsx("input",{type:"file",name:"coursePhoto"}),e?.coursePhotoError?(0,t.jsxs)("p",{className:"text-red-500",children:[e.coursePhotoError," "]}):"",(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[t.jsx("button",{type:"submit",className:"bg-black text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create"}),t.jsx(a.default,{href:"/home/courses",className:"font-bold text-sm text-blue-500 hover:text-blue-800",children:"Cancel"})]})]})})})}},13827:(e,r,s)=>{"use strict";s.r(r),s.d(r,{createCourse:()=>h});var t=s(98601);s(75811);var o=s(38013),a=s(52810),i=s(23803),n=s.n(i),c=s(34946),l=s(22870),u=s(43811),d=s(46893);let p=process.env.MONGO_URL||"mongodb://mongo:27017/",m=new o.MongoClient(p);async function h(e,r){let{userId:s}=(0,c.auth)();console.log(s);let t={courseIDError:"",courseNameError:"",courseDescriptionError:"",coursePhotoError:""},o=r.get("courseID"),i=r.get("courseName"),d=r.get("courseDescription"),p=r.get("coursePhoto"),h=p.name;if("string"!=typeof o||0==o.length?t.courseIDError="Please provide a valid Course Code":o=n()(o),"string"!=typeof i||0==i.length?t.courseNameError="Please provide a valid Course Name":i=n()(i),"string"!=typeof d||0==d.length?t.courseDescriptionError="Please provide a valid Course Description":d=n()(d),p&&"undefined"!==h&&0!==p.size?h=n()(p.name):t.coursePhotoError="No image uploaded",""!==Object.values(t).join(""))return t;(0,l.createImage)(p);try{await m.connect();let e=m.db("dbGrids").collection("accounts"),r=await e.findOne({_id:s}),t=await e.findOne({courses:{$elemMatch:{courseID:o}}});if(null==r)await e.insertOne({_id:s,courses:[{courseID:o,courseName:i,courseDescription:d,coursePhoto:h,isSubmitting:void 0}]});else if(null!==r&&null===t)await e.updateOne({_id:s},{$push:{courses:{courseID:o,courseName:i,courseDescription:d,coursePhoto:h,isSubmitting:void 0}}});else if(null!==r&&null!=t){let r=await e.updateOne({_id:s,"courses.courseID":o},{$set:{"courses.$.courseName":i,"courses.$.courseDescription":d,"courses.$.coursePhoto":h}});1===r.modifiedCount?console.log("The course was added"):console.log("No luck")}(0,u.revalidatePath)("/home/courses")}catch(e){console.log("This is the error and will appear in the server : "+e),(0,u.revalidatePath)("/home/courses")}finally{(0,a.redirect)("/home/courses/")}}(0,d.ensureServerEntryExports)([h]),(0,t.createActionProxy)("cc1c9e03f7c6430e1c55e9affadfbc638aa5e145",h)},15635:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>a,__esModule:()=>o,default:()=>i});let t=(0,s(86843).createProxy)(String.raw`/usr/app/client/src/app/home/courses/create/page.tsx`),{__esModule:o,$$typeof:a}=t,i=t.default},5677:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>b,metadata:()=>f});var t=s(25036),o=s(42195),a=s.n(o);s(5023);var i=s(93183),n=s(86843);let c=(0,n.createProxy)(String.raw`/usr/app/client/src/app/components/nav.tsx`),{__esModule:l,$$typeof:u}=c,d=c.default,p=(0,n.createProxy)(String.raw`/usr/app/client/src/app/errorBoundary.jsx`),{__esModule:m,$$typeof:h}=p,x=p.default,f={title:"Create Next App",description:"Generated by create next app"};function b({children:e}){return t.jsx(i.El,{children:t.jsx("html",{lang:"en",children:(0,t.jsxs)("body",{className:a().className,children:[t.jsx(d,{}),t.jsx(x,{children:e})]})})})}},92793:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(25036);function o(){return t.jsx("div",{className:"flex h-screen justify-center items-center",children:t.jsx("div",{className:"spinner"})})}},22870:(e,r,s)=>{"use strict";s.d(r,{createImage:()=>n});var t=s(71017),o=s(23803),a=s.n(o),i=s(57147);async function n(e){let r=process.cwd(),s=(0,t.join)(r,"public","images"),o=a()(e.name),n=(0,t.join)(s,o),c=await e.arrayBuffer(),l=Buffer.from(c);await i.promises.mkdir(s,{recursive:!0}),await i.promises.writeFile(n,l)}},73881:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(70337);let o=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,439,9,337,581,803,811],()=>s(18589));module.exports=t})();